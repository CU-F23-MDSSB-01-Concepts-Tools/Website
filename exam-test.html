<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science Concepts / Data Science Tools - Data Science Concepts – Final Exam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data Science Concepts / Data Science Tools</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Data Science Concepts – Final Exam</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Schedule</strong></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning Resources</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Homework</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 01</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 02</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hw-topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework Topics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Need help for Homework?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Create a homework report</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#instructions" id="toc-instructions" class="nav-link active" data-scroll-target="#instructions"><span class="header-section-number">1</span> Instructions</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions"><span class="header-section-number">2</span> Questions</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="exam-test.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Science Concepts – Final Exam</h1>
<p class="subtitle lead">Make-Up questions for the final exam</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>First Name, Last Name:</strong> __________________________</p>
<p><strong>Matric. No.:</strong> _____________________________</p>
<p><strong>Signature:</strong> _____________________________</p>
<section id="instructions" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Instructions</h1>
<ul>
<li>Whenever you see lines “______” or checkboxes <span class="math inline">\(\square\)</span> please fill in the blanks or check the boxes within the text.</li>
<li>Whenever you see <strong>(ANSWER ON BACKSIDE/EXTRA-SHEET)</strong> please write your answer on the backside of the sheet or on an extra sheet starting with the question number and subnumbers.</li>
</ul>
<p>THIS IS A MOCK EXAM! In the real exam</p>
<ul>
<li>there will also be questions on different topics</li>
<li>you will know the total points and the points per question before</li>
<li>you will be graded by the percentage of points achieved and there will be 100 points in total</li>
<li>the points you achieved will be scaled up by a factor of 1.2
<ul>
<li>That mean for example: 50 points count as 60, 80 points count as 96. So, you do not need to solve all questions to achieve the best grade.</li>
<li>The factor may be adjusted to account for the difficulty of the exam.</li>
</ul></li>
</ul>
</section>
<section id="questions" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Questions</h1>
<ol type="1">
<li><p>We define the tools of Data Science, Machine Learning, and Artificial Intelligence by the main outcomes they produce: <em>Data Science</em> (DS) produces insights, <em>Machine Learning</em> (ML) produces predictions, and <em>Artificial Intelligence</em> (AI) produces decisions.</p>
<ol type="a">
<li>Based on this definition, how would you classify the following practices as <em>DS</em>, <em>ML</em>, or <em>AI</em>?
<ol type="i">
<li>A movie and TV show streaming company analyzes the customer satisfaction with their recommendation algorithm. ___</li>
<li>A mobile phone company has a customer churn model which predicts the likelihood that a customer will cancel the contract in the next months. ___</li>
<li>A fingerprint recognition system on a smartphone decides if a certain person can log in to use the smartphone. ___</li>
<li>An insurance company uses a model and geo-referenced geological and meteorological data to quantify the risk of damage from natural disasters for every building insured. ___</li>
<li>Analysts try to understand the main causes for the results of a referendum being party affiliation, gender, age, or the place of residence of voters. ___</li>
<li>A chatbot answers questions which humans write in a chatbox on a website. ___</li>
</ol></li>
<li><strong>(ANSWER ON BACKSIDE/EXTRA-SHEET)</strong> Think of a company running an online dating application where users can search for, contact, and chat with potential dating partners. Give a brief example of potential applications of Data Science, Machine Learning, and Artificial Intelligence of that company.</li>
</ol></li>
<li><p>This is a visualization of the data science process.<br>
<img src="whole-game.png" class="img-fluid"><br>
Assing the terms <em>Import</em>, <em>Tidy</em>, <em>Transform</em>, <em>Visualize</em>, <em>Model</em>, <em>Communicate</em> to the following activities.</p>
<ol type="a">
<li>Creating a variable <code>year</code> and <code>gdp</code> in a data frame from the columns <code>year_1950</code>, <code>year_1951</code>, …, <code>year_2022</code> which have values for GDP.<br>
___________________<br>
</li>
<li>Creating a new variable <code>log_gdp</code> by taking the logarithm of the variable ‘gdp’.<br>
___________________<br>
</li>
<li>Loading a data frame from a csv file.<br>
___________________<br>
</li>
<li>Rendering a report from a markdown file showing the results of a growth analysis.<br>
___________________<br>
</li>
<li>Creating a scatter plot of the variables <code>log_gdp</code> and <code>year</code>.<br>
___________________<br>
</li>
<li>Fitting a line with <code>log_gdp</code> as dependent and <code>year</code> as independent variable.<br>
___________________</li>
</ol></li>
<li><p><em>Date frames.</em> Which of the following is correct?</p>
<p><span class="math inline">\(\square\)</span> A data frame can store data vectors of different types as variables.</p>
<p><span class="math inline">\(\square\)</span> A data frame can store data vectors of different lengths as variables.</p></li>
<li><p>When you create a vector with entries of different data types, types will be coerced. What will be the output of the vector created with <code>c(3, TRUE, 4, FALSE)</code>?</p>
<p><span class="math inline">\(\square\)</span> <code>[1] 3 0 4 1</code></p>
<p><span class="math inline">\(\square\)</span> <code>[1] 3 1 4 0</code></p>
<p><span class="math inline">\(\square\)</span> <code>[1] 3 4</code></p>
<p><span class="math inline">\(\square\)</span> <code>[1] TRUE TRUE TRUE FALSE</code></p></li>
<li><p>The vector <code>c(160,200,240,250,250,400,600)</code> is the vector of 7 incomes of a group of people. Which of the following statements is correct (there maybe multiple or no correct answer!).</p>
<p><span class="math inline">\(\square\)</span> The median income is 250</p>
<p><span class="math inline">\(\square\)</span> The mean income is 600</p>
<p><span class="math inline">\(\square\)</span> By adding an 8th value of your choice you can create a vector which median is 400</p>
<p><span class="math inline">\(\square\)</span> By adding an 8th value of your choice you can create a vector which mean is 400</p></li>
<li><p>In the context of predictive compared to explanatory inferential questions, describe if it is useful to split the data into training and testing data. Describe for what purpose it is useful or why it is not necessary.</p></li>
<li><p><strong>(ANSWER ON BACKSIDE/EXTRA-SHEET)</strong><br>
This scatter plot and linear model fit uses is made using the <code>penguins</code> data frame filtered for the Chinstrap and Gentoo penguins only.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="exam-test_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p><em>Model 1:</em> Below is the output of the corresponding linear model for <code>bill_depth_mm ~ flipper_length_mm</code>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term              estimate std.error statistic  p.value
  &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)        33.3      2.09        16.0  1.28e-36
2 flipper_length_mm  -0.0816   0.00995     -8.19 4.06e-14</code></pre>
</div>
</div>
<p>The <code>r-squared</code> value of <em>Model 1</em> is 0.266306.</p>
<p><em>Model 2:</em> Below is the output of the model with interaction effects of species <code>bill_depth_mm ~ flipper_length_mm * species</code>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  term                            estimate std.error statistic  p.value
  &lt;chr&gt;                              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)                       0.335     2.65       0.126 9.00e- 1
2 flipper_length_mm                 0.0924    0.0135     6.83  1.22e-10
3 speciesGentoo                    -8.45      3.57      -2.36  1.91e- 2
4 flipper_length_mm:speciesGentoo   0.0140    0.0175     0.804 4.22e- 1</code></pre>
</div>
</div>
<p>The <code>r-squared</code> value of <em>Model 2</em> is 0.8389515.</p>
<ol type="a">
<li>For <em>Model 1</em>: Interpret intercept, coefficient and R-squared! What does the intercept mean quantitatively? What does the coefficient tell us quantitatively about the relation between flipper length and bill depth? What percentage of the variance in bill depth is explained by flipper length? Is it a good model fit?</li>
<li>For <em>Model 2</em>: Which species has been automatically chosen as the reference category? The model describes two lines, one for each species, each with an own intercept and slope. Explain how we can infer intercept and slope for each species? Explain for each species how a mm in flipper length changes bill depth on average! Sketch the two lines in the plot above.</li>
<li>Compare the variance explained of the new model with the model without species. Which model is better? Explain!</li>
<li>In comparison of coefficients of <em>Model 1</em> and <em>Model 2</em>, does something appear paradoxical? If yes, how is this “paradox” called? Explain!</li>
</ol></li>
<li><p>Using the <em>confusion matrix</em><br>
<img src="../Website/img/confusion_large.png" class="img-fluid"> A <em>CoViD-19 breath analyzer</em> was developed. The device can analyze the exhalation of a person and makes a prediction if that person has CoViD-19 or not. For testing the device, the breaths of 10,000 persons were analyzed and additionally the persons were PCR-tested to check if they really had CoViD-19. The CoViD-19 <em>prevalence was 10%</em>. That means 1,000 from the 10,000 got CoViD-19. The following were the results in detail: 910 were breath-tested positive and had CoViD-19, 90 were breath-tested negative but had CoViD-19, 60 were breath-tested positive but were not infected with CoViD-19, and 8940 were breath-tested negative and were indeed not infected with CoViD-19.</p>
<ol type="a">
<li><p>Fill out the values in this <em>confusion matrix</em> including TP, FP, FN, and TN</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th>PP = </th>
<th>PN = </th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>P = </td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>N = </td>
<td></td>
<td></td>
</tr>
</tbody>
</table></li>
<li><p>Compute the <em>sensitivity</em> (fractional statmente like 100/1000 is enough)! ________</p></li>
<li><p>Analogously, compute the <em>specificity</em>. ________</p></li>
<li><p>Now, we assume that the computed sensitivity and the specificity are characteristics of the breath analyzer device. 10,000 new persons are tested but the the <strong>prevalence is only 1%</strong>. What is the expected number of true positives (TP)? ________</p></li>
</ol></li>
<li><p>Each facet in the following graph shows a time-series derived from the <em>smoothed daily new cases</em> of <strong>COVID-19 in Germany</strong> from the “Our World in Data” dataset. The data shows the first wave 2020. The x-axis marks week number of the year. For example, mark “09” marks the beginning of week 9.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="exam-test_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="a">
<li>Time series A is called “Daily new cases”.<br>
What does B show: ________________________________________<br>
What does C show: ________________________________________<br>
In which week was the maximimum for new cases: __________________<br>
What happens in B in this week? _________________________</li>
<li><em>Calculus question:</em> Which time series is the derivative of which? Which is a second derivative of which? Complete three sentences and completely describe the calculus relations:<br>
___ is the derivative of ___<br>
___ is the derivative of ___<br>
___ is the second derivative of ___</li>
<li>In the beginning the growth of cases is very close to exponential growth. Approximately in which week does the exponential growth ends? _________</li>
</ol></li>
<li><p><strong>(ANSWER ON BACKSIDE/EXTRA-SHEET)</strong> Below you see the plot of an artificial dataset of five observations and two variables visualized in the two-dimensional coordinate system. There is also the dendrogram of <em>hierarchical clustering</em>.</p>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="exam-test_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="exam-test_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<p>Explain how hierarchical clustering works using the example data. Explain what the algorithm does step by step! Read from the dendrogram: When we want two clusters, which point(s) belong to one cluster and which to the other cluster?</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>